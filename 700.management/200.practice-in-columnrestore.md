# 列存场景下的实践

在 OceanBase 数据库中，列存是将磁盘静态数据保存为列存，将内存修改数据保存为行存的一种数据存储形态，这种存储模式很好地兼顾了扫描性能及事务的处理能力。

结合列存的特点，本文主要介绍 OceanBase 数据库列存表的两个适用场景。

## 宽表场景

当查询只需要扫描宽表的单列或者少数列时，列存表可以省下大量的磁盘 I/O 开销。行存宽表要解决这个问题，需要在特定列上创建索引，让扫描主表的动作变为扫描列数更少的索引。所以列存表相比行存表，可以省下在特定列上创建索引的存储开销以及对索引的维护开销。

## 读多写少的 AP 数仓场景

在数仓场景下，经常需要执行复杂的分析查询，但这些查询往往只关注表的某些特定列。列存表由于其数据按列存储，能够高效地支持此类 AP 查询，减少大量不必要数据的 I/O 开销。
  
此外，OceanBase 数据库为了支持列存表频繁的小事务写入，避免列存表在数据更新操作上其性能受到较大影响，让列存表的增量数据保持了行存的格式。由于列存表的基线数据和增量数据格式不同，当增量数据较多的场景下，在查询时进行增量数据和基线数据归并的过程中，需要对行、列数据的格式进行转换和整合。这一步会比行存表增加额外的开销，并且对列数据的扫描耗时会随着增量数据的增长而线性增长，所以列存表更适合读多写少的场景。

有关列存表的更多介绍和使用，参见 [列存](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000000819423)。
